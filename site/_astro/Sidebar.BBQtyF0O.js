import{j as d}from"./jsx-runtime.CIMolHGP.js";import{r as n,R as x}from"./index.DddtCxX5.js";import{p as fe}from"./use-disposables.CSnXTm91.js";import{n as N,M as me,W as D,y as J,O as y,o as R,m as ve,t as be,H as ee,a as ge,u as te}from"./use-sync-refs.CdR1_aZG.js";import{l as ne,j as we,H as xe,i as F,c as pe,u as re}from"./use-server-handoff-complete.Cj_Xa9jq.js";import{F as $e}from"./XMarkIcon.FHGgCzxh.js";function je({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ce=n.forwardRef(je);function Ee(){let e=n.useRef(!1);return N(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:ae)!==n.Fragment||x.Children.count(e.children)===1}let U=n.createContext(null);U.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function Te(){let e=n.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ye(){let e=n.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=n.createContext(null);A.displayName="NestingContext";function I(e){return"children"in e?I(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ie(e,t){let r=ge(e),a=n.useRef([]),g=Ee(),$=fe(),l=R((u,i=y.Hidden)=>{let o=a.current.findIndex(({el:s})=>s===u);o!==-1&&(te(i,{[y.Unmount](){a.current.splice(o,1)},[y.Hidden](){a.current[o].state="hidden"}}),$.microTask(()=>{var s;!I(a)&&g.current&&((s=r.current)==null||s.call(r))}))}),w=R(u=>{let i=a.current.find(({el:o})=>o===u);return i?i.state!=="visible"&&(i.state="visible"):a.current.push({el:u,state:"visible"}),()=>l(u,y.Unmount)}),f=n.useRef([]),m=n.useRef(Promise.resolve()),b=n.useRef({enter:[],leave:[]}),j=R((u,i,o)=>{f.current.splice(0),t&&(t.chains.current[i]=t.chains.current[i].filter(([s])=>s!==u)),t?.chains.current[i].push([u,new Promise(s=>{f.current.push(s)})]),t?.chains.current[i].push([u,new Promise(s=>{Promise.all(b.current[i].map(([T,P])=>P)).then(()=>s())})]),i==="enter"?m.current=m.current.then(()=>t?.wait.current).then(()=>o(i)):o(i)}),C=R((u,i,o)=>{Promise.all(b.current[i].splice(0).map(([s,T])=>T)).then(()=>{var s;(s=f.current.shift())==null||s()}).then(()=>o(i))});return n.useMemo(()=>({children:a,register:w,unregister:l,onStart:j,onStop:C,wait:m,chains:b}),[w,l,a,j,C,b,m])}let ae=n.Fragment,se=me.RenderStrategy;function Fe(e,t){var r,a;let{transition:g=!0,beforeEnter:$,afterEnter:l,beforeLeave:w,afterLeave:f,enter:m,enterFrom:b,enterTo:j,entered:C,leave:u,leaveFrom:i,leaveTo:o,...s}=e,[T,P]=n.useState(null),c=n.useRef(null),v=le(e),oe=J(...v?[c,t,P]:t===null?[]:[t]),G=(r=s.unmount)==null||r?y.Unmount:y.Hidden,{show:p,appear:K,initial:Q}=Te(),[E,B]=n.useState(p?"visible":"hidden"),V=ye(),{register:M,unregister:k}=V;N(()=>M(c),[M,c]),N(()=>{if(G===y.Hidden&&c.current){if(p&&E!=="visible"){B("visible");return}return te(E,{hidden:()=>k(c),visible:()=>M(c)})}},[E,c,M,k,p,G]);let W=ne();N(()=>{if(v&&W&&E==="visible"&&c.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[c,E,W,v]);let de=Q&&!K,Y=K&&p&&Q,X=n.useRef(!1),L=ie(()=>{X.current||(B("hidden"),k(c))},V),Z=R(_=>{X.current=!0;let O=_?"enter":"leave";L.onStart(c,O,H=>{H==="enter"?$?.():H==="leave"&&w?.()})}),q=R(_=>{let O=_?"enter":"leave";X.current=!1,L.onStop(c,O,H=>{H==="enter"?l?.():H==="leave"&&f?.()}),O==="leave"&&!I(L)&&(B("hidden"),k(c))});n.useEffect(()=>{v&&g||(Z(p),q(p))},[p,v,g]);let ce=!(!g||!v||!W||de),[,h]=we(ce,T,p,{start:Z,end:q}),he=ve({ref:oe,className:((a=be(s.className,Y&&m,Y&&b,h.enter&&m,h.enter&&h.closed&&b,h.enter&&!h.closed&&j,h.leave&&u,h.leave&&!h.closed&&i,h.leave&&h.closed&&o,!h.transition&&p&&C))==null?void 0:a.trim())||void 0,...xe(h)}),S=0;return E==="visible"&&(S|=F.Open),E==="hidden"&&(S|=F.Closed),h.enter&&(S|=F.Opening),h.leave&&(S|=F.Closing),x.createElement(A.Provider,{value:L},x.createElement(pe,{value:S},ee({ourProps:he,theirProps:s,defaultTag:ae,features:se,visible:E==="visible",name:"Transition.Child"})))}function Ne(e,t){let{show:r,appear:a=!1,unmount:g=!0,...$}=e,l=n.useRef(null),w=le(e),f=J(...w?[l,t]:t===null?[]:[t]);ne();let m=re();if(r===void 0&&m!==null&&(r=(m&F.Open)===F.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[b,j]=n.useState(r?"visible":"hidden"),C=ie(()=>{r||j("hidden")}),[u,i]=n.useState(!0),o=n.useRef([r]);N(()=>{u!==!1&&o.current[o.current.length-1]!==r&&(o.current.push(r),i(!1))},[o,r]);let s=n.useMemo(()=>({show:r,appear:a,initial:u}),[r,a,u]);N(()=>{r?j("visible"):!I(C)&&l.current!==null&&j("hidden")},[r,C]);let T={unmount:g},P=R(()=>{var v;u&&i(!1),(v=e.beforeEnter)==null||v.call(e)}),c=R(()=>{var v;u&&i(!1),(v=e.beforeLeave)==null||v.call(e)});return x.createElement(A.Provider,{value:C},x.createElement(U.Provider,{value:s},ee({ourProps:{...T,as:n.Fragment,children:x.createElement(ue,{ref:f,...T,...$,beforeEnter:P,beforeLeave:c})},theirProps:{},defaultTag:n.Fragment,features:se,visible:b==="visible",name:"Transition"})))}function Pe(e,t){let r=n.useContext(U)!==null,a=re()!==null;return x.createElement(x.Fragment,null,!r&&a?x.createElement(z,{ref:t,...e}):x.createElement(ue,{ref:t,...e}))}let z=D(Ne),ue=D(Fe),Se=D(Pe),He=Object.assign(z,{Child:Se,Root:z});const Me=(e,t)=>e.data.autogenerate.type==="home"?t?`/${t}`:"/":e.data.autogenerate.enabled?`${t?`/${t}`:""}/events/${e.data.slug||e.id}`:`${t?`/${t}`:""}/pages/${e.data.slug||e.id}`,Be=e=>{const[t,r]=n.useState(!1),a=n.useMemo(()=>e.pages.find(l=>l.data.autogenerate.type==="home")?.id,[e.pages]),g=n.useMemo(()=>`${e.baseUrl?`/${e.baseUrl}`:""}/tags`===e.url.pathname,[e.baseUrl,e.url]),$=l=>g?!1:!e.slug&&l.id===a?!0:e.slug&&(e.slug===l.data.slug||e.slug===l.id);return d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>r(!t),type:"button",children:d.jsx(Ce,{className:"w-8 h-8"})}),t&&d.jsx("div",{className:"absolute top-0 left-0 h-dvh w-dvw",onClick:()=>r(!1)}),d.jsx(He,{show:t,children:d.jsxs("div",{className:"shadow absolute top-0 left-0 h-dvh w-80 bg-white w-10 transition duration-200 ease-in-out data-[closed]:-translate-x-full text-black text-sm overflow-y-auto",children:[d.jsx("div",{className:"flex w-full h-24 justify-end px-8",children:d.jsx("button",{type:"button",onClick:()=>r(!1),children:d.jsx($e,{className:"w-8 h-8"})})}),e.pages.map(l=>{let w=0,f=l.data.parent;for(;f;){w++;const m=e.pages.find(b=>b.id===f);m?f=m.data.parent:f=void 0}return d.jsx("a",{href:Me(l,e.baseUrl),children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:`${$(l)?"font-bold":""}`,title:l.data.title,style:{marginLeft:w*10},children:l.data.title},l.id)})},l.id)}),d.jsx("a",{href:`${e.baseUrl?`/${e.baseUrl}`:""}/tags`,children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:g?"font-bold":"",children:"Index"})})})]})})]})};export{Be as default};
